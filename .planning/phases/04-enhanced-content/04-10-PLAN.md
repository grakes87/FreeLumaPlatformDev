---
phase: 04-enhanced-content
plan: 10
type: execute
wave: 3
depends_on: ["04-04", "04-05"]
files_modified:
  - src/app/(app)/watch/page.tsx
  - src/components/video/HeroBanner.tsx
  - src/components/video/CategoryRow.tsx
  - src/components/video/VideoCard.tsx
  - src/components/layout/BottomNav.tsx
autonomous: true

must_haves:
  truths:
    - "User can access video library from bottom nav 'Watch' tab"
    - "Hero banner auto-plays featured video muted at top of library"
    - "Videos are displayed in horizontal scrollable rows per category"
    - "Continue Watching row appears at top showing in-progress videos"
    - "Video cards show thumbnail, title, duration, and view count"
    - "Bottom nav tab says 'Watch' instead of 'Animations'"
  artifacts:
    - path: "src/app/(app)/watch/page.tsx"
      provides: "Netflix-style video library home page"
    - path: "src/components/video/HeroBanner.tsx"
      provides: "Auto-play hero banner component"
    - path: "src/components/video/CategoryRow.tsx"
      provides: "Horizontal scrollable category row"
    - path: "src/components/video/VideoCard.tsx"
      provides: "Video thumbnail card with metadata"
  key_links:
    - from: "src/app/(app)/watch/page.tsx"
      to: "/api/videos and /api/videos/hero"
      via: "Fetch grouped videos and hero"
      pattern: "fetch.*api/videos"
    - from: "src/components/layout/BottomNav.tsx"
      to: "/watch route"
      via: "Tab href and label change"
      pattern: "Watch|/watch"
---

<objective>
Build the Netflix-style video library home page — hero banner with auto-play, horizontal scrollable category rows, continue watching section, and rename the bottom nav tab from "Animations" to "Watch".

Purpose: Users access the video library through the bottom nav and browse content in a Netflix-style layout.
Output: Video library home page with hero banner, category rows, continue watching, and nav rename.
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/04-enhanced-content/04-RESEARCH.md
@.planning/phases/04-enhanced-content/04-04-SUMMARY.md
@.planning/phases/04-enhanced-content/04-05-SUMMARY.md

Follow existing UI patterns:
@src/app/(app)/feed/page.tsx (for authenticated page pattern)
@src/components/layout/BottomNav.tsx (for nav tab configuration)
@src/components/daily/DailyPostSlide.tsx (for video element usage)
@src/app/(app)/animations/page.tsx (existing animations page to rename/replace)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Video library home page with hero banner and category rows</name>
  <files>
    src/app/(app)/watch/page.tsx
    src/components/video/HeroBanner.tsx
    src/components/video/CategoryRow.tsx
    src/components/video/VideoCard.tsx
  </files>
  <action>
    Create HeroBanner component:
    - Fetch hero video from /api/videos/hero
    - If hero exists: render full-width banner (aspect-ratio 16:9 or taller) with:
      - Muted, looping auto-play `<video>` element
      - Dark gradient overlay at bottom (for text readability)
      - Title, description, "Watch Now" button overlaid
      - Tap "Watch Now" → navigate to /watch/[id] (detail page)
    - If no hero: render a gradient placeholder with "Video Library" title
    - Use cn() for Tailwind classes, dark mode variants

    Create VideoCard component:
    - Props: video (id, title, thumbnail_url, duration_seconds, view_count)
    - Thumbnail image (or placeholder gradient if no thumbnail)
    - Duration badge bottom-right (format: mm:ss or h:mm:ss)
    - View count badge (format: "1.2K views")
    - Title below thumbnail (line-clamp-2)
    - Tap → navigate to /watch/[id]
    - Fixed width for horizontal scroll (~160px wide, 90px tall thumb)

    Create CategoryRow component:
    - Props: category (name, slug), videos[]
    - Category name as section header
    - Horizontal scrollable row of VideoCard components
    - Scroll snap for nice UX (scroll-snap-type: x mandatory on container)
    - Show 2.5 cards visible (peek effect for next card)
    - If no videos: don't render the row

    Create watch page at src/app/(app)/watch/page.tsx:
    1. Fetch data from /api/videos (returns categories with videos + continue_watching)
    2. Fetch hero from /api/videos/hero
    3. Layout:
       - HeroBanner at top (full width)
       - "Continue Watching" row (if user has in-progress videos) — prominent position
       - Category rows below, one per category
    4. Loading state: skeleton placeholders (hero skeleton + row skeletons)
    5. Use useSWR or useEffect+fetch pattern matching existing pages
    6. Scroll behavior: vertical scroll for the page, horizontal scroll within category rows
  </action>
  <verify>Navigate to /watch. Hero banner shows featured video with auto-play muted. Category rows display with horizontal scroll. Video cards show thumbnail, duration, view count.</verify>
  <done>Netflix-style video library renders with hero banner, continue watching row, and category rows with scrollable video cards.</done>
</task>

<task type="auto">
  <name>Task 2: Rename bottom nav tab from Animations to Watch</name>
  <files>
    src/components/layout/BottomNav.tsx
    src/app/(app)/watch/page.tsx
  </files>
  <action>
    Update BottomNav.tsx:
    1. Find the "Animations" tab entry (currently links to /animations)
    2. Change label from "Animations" to "Watch"
    3. Change href from "/animations" to "/watch"
    4. Change icon to Play or Film icon from lucide-react (or keep current icon if appropriate)
    5. Ensure the tab still respects mode filtering (previously hidden for positivity mode — keep this behavior for Watch tab as well, or show for all modes since video library is mode-agnostic — per CONTEXT videos are for all users, so SHOW for all modes)

    Handle the old /animations route:
    - If src/app/(app)/animations/page.tsx exists, either redirect to /watch or delete it
    - Add a redirect in Next.js config or simply update the page to redirect

    Ensure the watch page is included in AppShell padding (no special full-screen treatment like daily post).
  </action>
  <verify>Bottom nav shows "Watch" tab. Tapping navigates to /watch. Old /animations route redirects or is removed.</verify>
  <done>Bottom nav displays "Watch" tab linking to /watch. Tab visible for both bible and positivity mode users.</done>
</task>

</tasks>

<verification>
1. /watch page loads with hero banner, continue watching, and category rows
2. Hero banner auto-plays muted video with title overlay
3. Category rows scroll horizontally with snap behavior
4. Video cards show thumbnail, duration, view count, and navigate to detail on tap
5. Continue watching row shows only in-progress videos
6. Bottom nav shows "Watch" instead of "Animations"
7. Tab visible for all content modes
</verification>

<success_criteria>
- Netflix-style layout renders correctly on mobile (primary) and desktop
- Hero banner auto-plays muted with gradient overlay and title
- Category rows are horizontally scrollable with peek effect
- Continue watching shows user's in-progress videos
- Bottom nav renamed to "Watch" with correct routing
- Loading states with skeletons while data fetches
</success_criteria>

<output>
After completion, create `.planning/phases/04-enhanced-content/04-10-SUMMARY.md`
</output>
