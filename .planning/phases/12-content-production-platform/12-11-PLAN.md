---
phase: 12-content-production-platform
plan: 11
type: execute
wave: 4
depends_on: ["12-07"]
files_modified:
  - src/app/(app)/creator/layout.tsx
  - src/app/(app)/creator/page.tsx
  - src/components/creator/CreatorDashboard.tsx
  - src/components/creator/AssignmentList.tsx
  - src/components/creator/AssignmentDetail.tsx
autonomous: true

must_haves:
  truths:
    - "Creator portal has a dedicated /creator route group with creator-only access"
    - "Creator dashboard shows assignment list, personal stats, and upload area"
    - "Creator can view full generated content for any assigned day"
    - "Creator can see their completion stats (completed, pending, upcoming)"
  artifacts:
    - path: "src/app/(app)/creator/layout.tsx"
      provides: "Creator portal layout with navigation"
      exports: ["default"]
    - path: "src/app/(app)/creator/page.tsx"
      provides: "Creator dashboard page"
      exports: ["default"]
    - path: "src/components/creator/CreatorDashboard.tsx"
      provides: "Main creator dashboard component"
      min_lines: 80
    - path: "src/components/creator/AssignmentList.tsx"
      provides: "Assignment cards with status indicators"
      min_lines: 50
  key_links:
    - from: "src/components/creator/CreatorDashboard.tsx"
      to: "/api/creator/assignments"
      via: "fetches creator's assignments"
      pattern: "fetch.*creator/assignments"
    - from: "src/components/creator/CreatorDashboard.tsx"
      to: "/api/creator/stats"
      via: "fetches creator's personal stats"
      pattern: "fetch.*creator/stats"
---

<objective>
Build the creator portal UI: layout, dashboard page, assignment list, and assignment detail view.

Purpose: Creators need a dedicated section to see their assigned scripts, view generated content for reference, and track their progress. This is separate from the main app and admin sections.
Output: Creator portal layout, dashboard with stats and assignments, assignment detail view.
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-content-production-platform/12-CONTEXT.md
@src/app/(app)/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create creator portal layout and dashboard</name>
  <files>
    src/app/(app)/creator/layout.tsx
    src/app/(app)/creator/page.tsx
    src/components/creator/CreatorDashboard.tsx
  </files>
  <action>
**layout.tsx** -- Creator portal layout:
- Wraps creator pages within the (app) route group (inherits auth from AppShell)
- Adds a creator-specific top bar or sub-header: "Creator Portal" title with back link to main app
- Uses existing AppShell padding but with a minimal header indicating creator context
- Access check: on mount, fetch /api/creator/stats. If 403 (not a creator), redirect to /feed with toast "You don't have a creator profile"
- Simple layout: top bar + children content

**page.tsx** -- Creator dashboard page:
`'use client'; import CreatorDashboard from '@/components/creator/CreatorDashboard'; export default function Page() { return <CreatorDashboard />; }`

**CreatorDashboard.tsx:**
- Fetches two endpoints on mount: GET /api/creator/assignments?month={currentMonth} and GET /api/creator/stats
- **Stats section** at top: 3-card row showing Completed, Pending, Approved counts for current month. Styled as colored cards (green/yellow/blue).
- **Month selector:** Same pattern as admin -- left/right arrows to navigate months
- **Assignment list section:** Renders AssignmentList component with fetched assignments
- **Deadline notice:** If current date < 15th and there are pending assignments, show amber banner: "Videos due by the 15th of this month"
- Loading state: skeleton cards while fetching
  </action>
  <verify>Run `npx tsc --noEmit src/app/\\(app\\)/creator/layout.tsx src/app/\\(app\\)/creator/page.tsx src/components/creator/CreatorDashboard.tsx` for TypeScript check.</verify>
  <done>Creator portal layout with access check. Dashboard shows monthly stats, deadline notice, and assignment list with month navigation.</done>
</task>

<task type="auto">
  <name>Task 2: Create AssignmentList and AssignmentDetail components</name>
  <files>
    src/components/creator/AssignmentList.tsx
    src/components/creator/AssignmentDetail.tsx
  </files>
  <action>
**AssignmentList.tsx:**
- Props: assignments array from API
- Renders a vertical list of assignment cards
- Each card shows:
  - Date (formatted: "March 5, 2026")
  - Mode badge (Bible or Positivity, color-coded)
  - Status badge (assigned=yellow, submitted=blue, approved=green, rejected=red)
  - Title/verse reference snippet
  - If rejected: small red text showing "Rejected" with eye icon to view note
- Tap on card: opens AssignmentDetail for that assignment
- Group by status: Rejected at top (needs attention), then Assigned, then Submitted, then Approved
- Empty state: "No assignments for this month" message

**AssignmentDetail.tsx:**
- Props: assignmentId (number), onClose callback
- Fetches GET /api/creator/content/{id} on mount
- Full-screen overlay (uses createPortal pattern, matching PostComposer):
  - Top bar: date + mode + status badge + close button
  - Scrollable content area showing all generated fields:
    - Camera Script (highlighted/prominent -- this is what they read)
    - Verse/Quote text
    - Devotional Reflection (bible mode)
    - Meditation Script (positivity mode)
    - Background Video Prompt (reference)
    - Translations section: each translation with text + audio player (if audio_url exists) + SRT download link
  - If rejected: prominent rejection note box at top in red with admin feedback
  - Bottom action area:
    - If status is 'assigned' or 'rejected': "Record Video" button (links to /creator/record/{id})
    - If status is 'submitted': "Resubmit" button (links to /creator/record/{id})
    - If status is 'approved': "Approved" badge (no action)
  </action>
  <verify>Run `npx tsc --noEmit src/components/creator/AssignmentList.tsx src/components/creator/AssignmentDetail.tsx` for TypeScript check.</verify>
  <done>AssignmentList shows grouped cards with status badges. AssignmentDetail displays full content with camera script prominently featured and action buttons for recording.</done>
</task>

</tasks>

<verification>
- Creator portal accessible at /creator
- Non-creators redirected with appropriate message
- Dashboard fetches and displays assignments and stats
- Assignment detail shows all generated content fields
- Recording button links to teleprompter page
</verification>

<success_criteria>
- /creator route renders creator portal within (app) route group
- Dashboard shows monthly stats and deadline notice
- Assignment list grouped by status with rejection feedback visible
- Assignment detail shows full generated content with camera script prominent
- Recording action button links to teleprompter recording page
</success_criteria>

<output>
After completion, create `.planning/phases/12-content-production-platform/12-11-SUMMARY.md`
</output>
