---
phase: 12-content-production-platform
plan: 14
type: execute
wave: 6
depends_on: ["12-09", "12-10", "12-11", "12-12", "12-13"]
files_modified:
  - src/app/(admin)/layout.tsx
  - src/components/admin/content-production/ContentProductionPage.tsx
  - src/components/admin/content-production/PlatformSettingsSection.tsx
  - src/components/daily/DailyPostSlide.tsx
autonomous: true

must_haves:
  truths:
    - "Admin navigation includes Content Production link"
    - "Platform settings section allows configuring ElevenLabs, Murf, and HeyGen API keys and voice/avatar IDs"
    - "Creator attribution shown on daily content (name + avatar)"
    - "All admin UI tabs are wired and functional"
    - "Build passes with no TypeScript errors"
  artifacts:
    - path: "src/app/(admin)/layout.tsx"
      provides: "Admin layout with Content Production nav link"
      exports: ["default"]
    - path: "src/components/admin/content-production/PlatformSettingsSection.tsx"
      provides: "API key and voice ID configuration UI"
      exports: ["default"]
  key_links:
    - from: "src/app/(admin)/layout.tsx"
      to: "src/app/(admin)/admin/content-production/page.tsx"
      via: "nav link to content production page"
      pattern: "content-production"
    - from: "src/components/daily/DailyPostSlide.tsx"
      to: "src/lib/db/models/LumaShortCreator.ts"
      via: "displays creator attribution on daily content"
      pattern: "creator|Recorded by"
---

<objective>
Final integration: wire admin nav link, add platform settings for API keys/voice IDs, add creator attribution to daily content display, and verify the full build passes.

Purpose: This plan connects all Phase 12 pieces together: admin can navigate to content production, configure external API settings, and users see creator attribution on daily posts.
Output: Admin nav updated, settings configured, creator attribution visible, clean build.
</objective>

<execution_context>
@/Users/admin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/admin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-content-production-platform/12-CONTEXT.md
@src/app/(admin)/layout.tsx
@src/components/daily/DailyPostSlide.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add admin nav link and platform settings section</name>
  <files>
    src/app/(admin)/layout.tsx
    src/components/admin/content-production/PlatformSettingsSection.tsx
    src/components/admin/content-production/ContentProductionPage.tsx
  </files>
  <action>
**Update admin layout.tsx:**
Add "Content Production" link to the admin sidebar/navigation. Use a Film or Clapperboard icon from lucide-react. Position after the existing nav items (Videos, Verse Categories, etc.). Link to `/admin/content-production`.

**PlatformSettingsSection.tsx:**
A settings panel within the Content Production page (accessible via a "Settings" gear icon or tab) that manages pipeline configuration via PlatformSetting:

Settings fields:
- ElevenLabs API Key (password input, saves to 'elevenlabs_api_key')
- ElevenLabs Voice ID (text input, saves to 'elevenlabs_voice_id')
- Murf API Key (password input, saves to 'murf_api_key')
- Murf Voice ID (text input, saves to 'murf_voice_id', e.g., 'es-ES-natalie')
- HeyGen API Key (password input, saves to 'heygen_api_key')

Each field:
- Loads current value from GET /api/platform-settings (existing endpoint) on mount
- Saves via PUT /api/platform-settings on blur/submit
- Shows saved/unsaved indicator
- Password fields show masked value with reveal toggle

Use a collapsible section or modal trigger from ContentProductionPage. A gear icon in the top bar that opens the settings panel.

**Update ContentProductionPage.tsx:**
- Add gear icon button in top bar area that toggles PlatformSettingsSection
- Wire the HeyGen tab trigger (if not already done in plan 10 -- the AssignedTab may have a "Generate AI Videos" button that calls the HeyGen trigger route)
- Add "Creators" button in top bar that opens CreatorManager modal
- Ensure all 5 tabs are imported and rendered
- Ensure the refetch mechanism works across all tabs (when one tab triggers generation, other tabs refresh)
  </action>
  <verify>
Navigate to /admin in browser. Verify "Content Production" link appears in navigation. Click to verify page loads. Check gear icon opens settings panel.
  </verify>
  <done>Admin navigation includes Content Production link. Platform settings panel allows configuring all API keys and voice IDs. ContentProductionPage wires all tabs and settings together.</done>
</task>

<task type="auto">
  <name>Task 2: Add creator attribution to daily content and verify build</name>
  <files>
    src/components/daily/DailyPostSlide.tsx
  </files>
  <action>
**Creator attribution on DailyPostSlide:**
Per CONTEXT: "Creator name + small avatar displayed on daily content ('Recorded by [Name]'). Non-linking -- displays only, no navigation to profile."

1. The daily content API response needs to include creator info. Check if the existing GET /api/daily-content already includes creator association. If not, update the daily content API to include the creator (LumaShortCreator with User include for avatar_url) when the content has a creator_id.

2. In DailyPostSlide (the component that renders each daily post slide), add a small attribution line:
   - Position: bottom of the slide, above the reaction bar area, or on the LumaShort video slide
   - Content: small UserAvatar (24px) + "Recorded by [Creator Name]" in small text
   - Styling: semi-transparent white text on dark background (matching existing overlay style)
   - Only shown when creator data exists (many existing content entries won't have creator)
   - Non-linking (no click handler, no navigation)

3. **Full build verification:**
   - Run `npx next build` and ensure zero TypeScript errors
   - Fix any type mismatches or missing imports across all Phase 12 files
   - This is the final plan -- all components must be wired and compilable

If the daily content API needs updating to include creator data, make the minimal change: add LumaShortCreator include with User include in the daily content query, and return creator name + avatar URL in the response.
  </action>
  <verify>
Run `cd /Applications/XAMPP/xamppfiles/htdocs/FreeLumaPlatform && npx next build` and verify the build completes with zero errors. Check that DailyPostSlide renders creator attribution when creator data is present.
  </verify>
  <done>Creator attribution displays "Recorded by [Name]" with avatar on daily content when creator is assigned. Full build passes with zero TypeScript errors. All Phase 12 features integrated.</done>
</task>

</tasks>

<verification>
- `npx next build` completes with zero errors
- Admin navigation shows Content Production link
- Platform settings panel saves API keys and voice IDs
- Creator attribution visible on daily content when creator exists
- All 5 admin tabs render correctly
- Creator portal accessible at /creator
- Teleprompter recording page functional
</verification>

<success_criteria>
- Content Production link in admin navigation
- Platform settings for ElevenLabs/Murf/HeyGen API keys configurable from admin UI
- Creator attribution on daily content (non-linking, display only)
- Zero TypeScript build errors across entire project
- All Phase 12 components connected and functional
</success_criteria>

<output>
After completion, create `.planning/phases/12-content-production-platform/12-14-SUMMARY.md`
</output>
